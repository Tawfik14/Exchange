<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>{% block title %}Royal Gold Forex{% endblock %}</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <!-- Poppins pour le menu et les boutons -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@500;600;700&display=swap" rel="stylesheet">

  {% block stylesheets %}
  <style>
    :root{
      --ink:#0b1220; --muted:#6b7280; --bg:#fff;
      --hover:#f9fafb; --shadow:0 6px 18px rgba(0,0,0,.06);
      --brand:#4f7cff;
    }
    *{box-sizing:border-box;}
    body{margin:0;background:var(--bg);color:var(--ink);font:15px/1.5 "Inter",system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;}
    a{text-decoration:none;}

    /* ===== HEADER ===== */
    .site-header{
      padding:22px 16px 18px;
      text-align:center;
      border-bottom:1px solid #e5e7eb;
      background:#fff;
    }
    .site-header img{
      height:120px; /* logo header agrandi */
      width:auto;display:block;margin:0 auto 12px;
      position:relative; left:-10px; /* léger décalage à gauche */
    }
    @media (max-width:560px){
      .site-header img{height:100px; left:-6px;}
    }

    /* Nav + Poppins (tout centré) */
    .nav{
      display:flex;justify-content:center;gap:24px;
      font-weight:600;font-size:16px;
      font-family:'Poppins',sans-serif;
      align-items:center; flex-wrap:wrap;
    }
    .nav a{color:var(--ink);transition:color .15s;}
    .nav a:hover{color:var(--brand);}
    .nav .hello{font-family:'Poppins',sans-serif;font-weight:600;color:#0b1220;}

    /* Boutons Auth */
    .nav .btn-auth{
      border:1px solid #000; background:#000; color:#fff;
      padding:10px 14px; border-radius:0; font-weight:600; line-height:1; display:inline-block;
    }
    .nav .btn-auth:hover{opacity:.9; color:#fff;}

    /* ===== FOOTER BLANC ===== */
    .footer-top{background:#fff; border-top:1px solid #e5e7eb;}
    .footer-top .inner{
      max-width:1280px;margin:0 auto;padding:28px 20px;
      display:grid;gap:24px;grid-template-columns:1.2fr .8fr;align-items:center;
    }
    .footer-top h4{margin:0 0 8px;font-size:18px;font-weight:700;}
    .footer-top .hours{display:grid;grid-template-columns:auto auto;gap:6px 16px;font-size:14px;}
    .footer-top .hours dt{color:#6b7280;}
    .footer-top .hours dd{margin:0;font-weight:600;color:#0b1220;}
    .footer-top .contact{margin-top:10px;font-size:15px;}
    .footer-top .contact a{color:#0b1220;font-weight:700;}
    .footer-top .contact a:hover{color:var(--brand);}

    .footer-top .brand{text-align:right;}
    .footer-top .brand img{
      height:120px; width:auto; display:inline-block;
      filter:drop-shadow(0 6px 14px rgba(0,0,0,.08));
      position:relative; top:-8px; /* remonte légèrement */
    }
    .footer-top .note{font-size:12px;color:#6b7280;margin-top:8px;}

    /* ===== FOOTER NOIR ===== */
    .footer-bottom{
      background:linear-gradient(180deg,#0e0e0e 0%,#0b0b0b 100%);
      color:#e5e7eb;
      border-top:1px solid rgba(255,255,255,.06);
    }
    .footer-bottom .inner{
      max-width:980px;margin:0 auto;padding:44px 24px 36px;
      display:flex;flex-direction:column;align-items:center;text-align:center;gap:22px;
    }
    .footer-section-title{margin:0;font-size:12px;letter-spacing:.14em;text-transform:uppercase;color:#94a3b8;}
    .links-col{display:flex;flex-direction:column;gap:12px;align-items:center;margin-top:2px;}
    .links-col a{color:#cbd5e1;font-size:14px;}
    .links-col a:hover{color:#fff;}

    .payments{display:flex;gap:14px;align-items:center;justify-content:center;flex-wrap:wrap;}
    .pay-chip{
      background:#0f172a;border:1px solid rgba(255,255,255,.08);
      border-radius:10px;padding:8px 10px;display:flex;align-items:center;gap:8px;
      box-shadow:inset 0 1px 0 rgba(255,255,255,.04),0 6px 18px rgba(0,0,0,.22);
    }
    .pay-chip svg{height:22px;width:auto;display:block}
    .rights{margin-top:2px;font-size:12px;color:#a0aec0;}

    /* Responsive footer blanc */
    @media(max-width:800px){
      .footer-top .inner{grid-template-columns:1fr;text-align:left;}
      .footer-top .brand{text-align:left;}
      .footer-top .brand img{height:96px; top:-6px;}
    }
  </style>
  {% endblock %}

  {% block javascripts %}{% endblock %}
</head>
<body>

  {# Session & salutation + mode unifié pour les liens #}
  {% set auth = app.session.get('auth_user') ?? null %}
  {% set hour = "now"|date("G") %}
  {% set salutation = (hour >= 18 or hour < 6) ? 'Bonsoir' : 'Bonjour' %}
  {% set modeParam = auth ? ((auth.role ?? '') == 'admin' ? 'admin' : 'user') : 'guest' %}

  <!-- ===== HEADER ===== -->
  <header class="site-header">
    <img src="/Logo/logo.png" alt="Logo Royal Gold Forex">
    <nav class="nav" aria-label="Navigation principale">
      <a href="{{ path('app_exchange', {mode: modeParam}) }}">Devises</a>
      <a href="{{ path('app_reservation', {mode: modeParam}) }}">Réservation</a>
      <a href="{{ path('app_contact', {mode: modeParam}) }}">Contact</a>

      {# Lien GÉRER → page dédiée, seulement pour l’admin #}
      {% if auth and (auth.role ?? '') == 'admin' %}
        {# Change 'admin_dashboard' si ton nom de route est différent #}
        <a href="{{ path('admin_dashboard', {mode: 'admin'}) }}">Gérer</a>
      {% endif %}

      {# Auth #}
      {% if not auth %}
        <a class="btn-auth" href="{{ path('app_login', {mode: modeParam}) }}">Connexion</a>
      {% else %}
        <span class="hello">{{ salutation }}, {{ auth.firstName ?? 'Utilisateur' }}</span>
        <a class="btn-auth" href="{{ path('app_logout') }}">Déconnexion</a>
      {% endif %}
    </nav>
  </header>

  <!-- ===== CONTENU ===== -->
  <main>
    {% block body %}{% endblock %}
  </main>

  <!-- ===== FOOTER BLANC ===== -->
  <footer class="footer-top">
    <div class="inner">
      <section>
        <h4>Nous contacter & Horaires</h4>
        <dl class="hours">
          <dt>Lun — Ven</dt><dd>09:00 — 19:00</dd>
          <dt>Samedi</dt><dd>10:00 — 18:00</dd>
          <dt>Dimanche</dt><dd>Fermé</dd>
        </dl>
        <div class="contact">Tél : <a href="tel:+33123456789">+33 1 23 45 67 89</a></div>
        <p class="note">Service rapide au guichet • Sans frais cachés</p>
      </section>
      <aside class="brand">
        <img src="/Logo/logo.png" alt="Royal Gold Forex — Logo">
      </aside>
    </div>
  </footer>

  <!-- ===== FOOTER NOIR ===== -->
  <footer class="footer-bottom">
    <div class="inner">
      <p class="footer-section-title">Informations légales</p>
      <nav class="links-col" aria-label="Liens légaux">
        <a href="{{ path('app_cgu') }}">Conditions générales d'utilisation</a>
        <a href="{{ path('app_cgv') }}">Conditions générales de vente</a>
        <a href="{{ path('app_confidentialite') }}">Politique de confidentialité</a>
        <a href="{{ path('app_cookies') }}">Politique relative aux cookies</a>
        <a href="{{ path('app_mentions') }}">Mentions légales</a>
        <a href="mailto:contact@royalgoldforex.fr">contact@royalgoldforex.fr</a>
      </nav>

      <p class="footer-section-title">Moyens de paiement</p>
      <div class="payments" aria-label="Moyens de paiement acceptés">
        <!-- VISA -->
        <div class="pay-chip" title="Visa">
          <svg role="img" aria-label="Visa" viewBox="0 0 48 16" xmlns="http://www.w3.org/2000/svg">
            <rect width="48" height="16" rx="8" fill="#ffffff10"/>
            <path d="M13.5 11.8L11.8 4.2h2.1l1 4.8 2-4.8h2l-3 7.6h-2.4zm-6.7 0L5.3 6.3l-.3 1.6c-.2 1-1 2-2.1 2H1.2l.3-1.6h.8c.2 0 .4-.2 .5-.6L3.8 4.2h2.1l2 7.6H6.8zm9.4 0l1.3-7.6H20l-1.3 7.6h-2.5zm9.9 .1c-1.6 0-2.8-.7-3.5-1.2l.8-1.4c.7 .4 1.6 .9 2.8 .9.6 0 1.4-.2 1.4-.8 0-.4-.4-.6-1.6-1-1.7-.6-2.8-1.2-2.8-2.6 0-1.9 1.9-2.7 3.6-2.7 1.3 0 2.6 .5 3.3 1l-.8 1.4c-.6-.4-1.3-.8-2.3-.8-.7 0-1.3 .2-1.3 .8 0 .5 .6 .7 1.8 1.2 1.7 .6 2.6 1.2 2.6 2.5 0 2-1.8 2.7-3.8 2.7z" fill="#ffffff" opacity=".9"/>
          </svg>
        </div>
        <!-- MasterCard -->
        <div class="pay-chip" title="Mastercard">
          <svg role="img" aria-label="Mastercard" viewBox="0 0 48 16" xmlns="http://www.w3.org/2000/svg">
            <rect width="48" height="16" rx="8" fill="#ffffff10"/>
            <circle cx="20" cy="8" r="4.2" fill="#ea001b"/>
            <circle cx="28" cy="8" r="4.2" fill="#ff5f00"/>
            <path d="M24 12a4 4 0 0 1 0-8 4 4 0 0 1 0 8z" fill="#ff5f00"/>
          </svg>
        </div>
        <!-- American Express -->
        <div class="pay-chip" title="American Express">
          <svg role="img" aria-label="American Express" viewBox="0 0 48 16" xmlns="http://www.w3.org/2000/svg">
            <rect width="48" height="16" rx="8" fill="#ffffff10"/>
            <text x="24" y="11" font-family="Inter, Arial, sans-serif" font-size="6" text-anchor="middle" fill="#fff">AMEX</text>
          </svg>
        </div>
        <!-- Apple Pay -->
        <div class="pay-chip" title="Apple Pay">
          <svg viewBox="0 0 32 16" xmlns="http://www.w3.org/2000/svg" aria-label="Apple Pay">
            <rect width="32" height="16" rx="8" fill="#ffffff10"/>
            <path d="M8.7 6.3c-.5 .6-1.2 1-2 1-.1-.8 .2-1.6 .7-2.1 .5-.6 1.4-1 2.1-1 .1 .8-.2 1.6-.8 2.1Zm1 1.1c-1.1-.1-2 .6-2.4 .6-.4 0-1-.5-1.7-.5-.9 0-1.7 .5-2.1 1.2-1 1.7-.3 4.2 .7 5.6 .5 .7 1.1 1.5 1.9 1.5 .7 0 .9-.5 1.9-.5 1 0 1.2 .5 1.9 .5 .8 0 1.3-.7 1.8-1.4 .6-.9 .8-1.9 .8-1.9-.1 0-1.5-.6-1.5-2.3 0-1.4 1.1-2 1.1-2-.6-.9-1.7-1.1-2.4-1.1ZM20.5 5h2.2c1.2 0 2 .7 2 1.8s-.8 1.8-2 1.8h-1v2.3h-1.2V5Zm1.2 2.9h1c.6 0 1-.4 1-1s-.4-1-1-1h-1v2Z" fill="#fff"/>
          </svg>
        </div>
      </div>

      <div class="rights">
        © {{ "now"|date("Y") }} — Tous droits réservés · Royal Gold Forex
      </div>
    </div>
  </footer>

</body>
</html>

