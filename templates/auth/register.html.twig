{% extends 'base.html.twig' %}
{% block title %}Inscription{% endblock %}

{% block body %}
<div style="max-width: 560px; margin: 3rem auto;">
  <div style="text-align:center; margin-bottom: 1rem;">
    <a href="{{ path('app_exchange', {mode: mode|default('guest')}) }}" aria-label="Accueil">
      <img src="/Logo/logo.png" alt="Logo" style="height:72px; width:auto;">
    </a>
  </div>

  <div style="background:rgba(255,255,255,0.04); border:1px solid var(--border); border-radius:16px; padding: 18px;">
    <h1 style="margin:0 0 10px 0; font-size: 1.3rem;">Créer un compte</h1>

    {% for m in app.flashes('error') %}
      <div style="background:#8b1d1d; color:#fff; padding:.6rem 1rem; border-radius:10px; margin:.5rem 0;">{{ m }}</div>
    {% endfor %}

    <form method="post" action="{{ path('app_register', {mode: mode|default('guest')}) }}" style="display:grid; gap: 12px;">
      <div style="display:grid; grid-template-columns: 1fr 1fr; gap:12px;">
        <div>
          <label>Prénom</label>
          <input name="first_name" required
                 style="width:100%; padding:12px; border:1px solid var(--border); border-radius:12px; background:rgba(255,255,255,0.03); color:var(--text);" />
        </div>
        <div>
          <label>Nom</label>
          <input name="name" required
                 style="width:100%; padding:12px; border:1px solid var(--border); border-radius:12px; background:rgba(255,255,255,0.03); color:var(--text);" />
        </div>
      </div>

      <div style="display:grid; grid-template-columns: 2fr 1fr; gap:12px;">
        <div>
          <label>Email</label>
          <input type="email" name="email" required
                 style="width:100%; padding:12px; border:1px solid var(--border); border-radius:12px; background:rgba(255,255,255,0.03); color:var(--text);" />
        </div>
        <div>
          <label>Date de naissance</label>
          <input type="date" name="dob" required
                 max="{{ 'now'|date('Y-m-d') }}"
                 style="width:100%; padding:12px; border:1px solid var(--border); border-radius:12px; background:rgba(255,255,255,0.03); color:var(--text);" />
        </div>
      </div>

      <div style="display:grid; grid-template-columns: 1fr 1fr; gap:12px;">
        <div>
          <label>Mot de passe</label>
          <input type="password" name="password" required
                 style="width:100%; padding:12px; border:1px solid var(--border); border-radius:12px; background:rgba(255,255,255,0.03); color:var(--text);" />
        </div>
        <div>
          <label>Confirmer</label>
          <input type="password" name="confirm" required
                 style="width:100%; padding:12px; border:1px solid var(--border); border-radius:12px; background:rgba(255,255,255,0.03); color:var(--text);" />
        </div>
      </div>

      <button class="btn btn-primary" type="submit">S’inscrire</button>
    </form>

    <div style="margin-top:10px; color:#93a1c6;">
      Déjà inscrit ?
      <a href="{{ path('app_login', {mode: mode|default('guest')}) }}" style="text-decoration:underline;">Se connecter</a>
    </div>
  </div>
</div>
{% endblock %}

