{% extends 'base.html.twig' %}
{% block title %}Devises — Taux Achat & Vente{% endblock %}

{% block stylesheets %}
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
<style>
  :root{
    --ink:#0b1220; --muted:#6b7280; --bg:#fff;
    --hover:#f9fafb; --shadow:0 6px 18px rgba(0,0,0,.06);
  }
  *{box-sizing:border-box}
  body{margin:0;background:var(--bg);color:var(--ink);font:15px/1.5 "Inter",system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;text-align:center}
  .wrap{max-width:1280px;margin:0 auto;padding:32px 20px;text-align:left}

  /* HEADER */
  .site-header{padding:28px 16px 20px;text-align:center}
  .site-header img{height:90px;width:auto;display:block;margin:0 auto 12px}

  /* NAVIGATION sous le logo */
  .nav{
    display:flex;justify-content:center;gap:40px;
    font-weight:600;font-size:16px;
  }
  .nav a{color:var(--ink);text-decoration:none;transition:color .15s}
  .nav a:hover{color:#4f7cff}

  h1{margin:0 0 10px;font-weight:700;font-size:22px;text-align:left}
  .muted{color:var(--muted);font-size:14px;text-align:left}

  /* grille plus équilibrée */
  .grid{
    display:grid;
    gap:36px;
    grid-template-columns:repeat(auto-fill, minmax(300px, 1fr));
  }

  /* box style moderne sans bordure */
  .row{
    border:none;
    border-radius:14px;
    background:#fff;
    padding:20px;
    display:flex; align-items:center; gap:18px;
    cursor:pointer;
    box-shadow:var(--shadow);
    transition:transform .15s ease, box-shadow .15s ease;
  }
  .row:hover{transform:translateY(-3px);box-shadow:0 10px 24px rgba(0,0,0,.08)}

  .flag{font-size:42px; line-height:1}
  .txt{flex:1; min-width:0}
  .country{font-weight:700; font-size:14px}
  .lines{margin-top:4px; color:var(--muted); font-size:13px; line-height:1.35}
  .code{margin-left:auto;font-weight:700;font-size:14px;color:#101828}
</style>
{% endblock %}

{% block body %}
<header class="site-header">
  <img src="/Logo/logo.png" alt="Logo">
  <nav class="nav">
  <a href="{{ path('app_exchange', {mode: mode|default('guest')}) }}">Devises</a>
  <a href="#">Horaires & Plans</a>
  <a href="{{ path('app_contact', {mode: mode|default('guest')}) }}">Contact</a>
</nav>

</header>

<div class="wrap">
  <h1>Devises</h1>
  <p class="muted">Cliquez sur une devise pour ouvrir le calculateur.</p>

  <div class="grid">
    {% for c in currencies %}
      {% set code = c.code %}
      {% set r = rates[code] ?? null %}
      {% set sell = r and r.sell ? r.sell : null %}
      {% set invBuy = (r and r.buy and r.buy > 0) ? (1 / r.buy) : null %}
      {% set tiny = invBuy is not null and invBuy < 0.02 %}

      <article class="row"
        data-code="{{ code }}"
        data-country="{{ c.country|lower }}"
        data-currency="{{ c.currency|lower }}"
        data-flag="{{ c.flag }}"
        data-name="{{ c.currency }}">
        
        <span class="flag">{{ c.flag }}</span>
        <div class="txt">
          <div class="country">{{ c.country }}</div>
          <div class="lines">
            {% if sell %}1 € = {{ sell|number_format(4, '.', ' ') }} {{ code }}{% else %}—{% endif %}<br>
            {% if invBuy %}
              {% if tiny %}
                100 {{ code }} = {{ (invBuy*100)|number_format(4, '.', ' ') }} €
              {% else %}
                1 {{ code }} = {{ invBuy|number_format(4, '.', ' ') }} €
              {% endif %}
            {% else %}—{% endif %}
          </div>
        </div>
        <div class="code">{{ code }}</div>
      </article>
    {% endfor %}
  </div>
</div>
{% endblock %}

